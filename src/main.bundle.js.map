{
  "version": 3,
  "sources": ["main.js"],
  "sourcesContent": ["import logo from \"./assets/cryptocard_256x256.png\";\nimport favicon from \"./favicon.ico\";\n\nconst imgLogoElement = document.getElementById(\"logo\");\nimgLogoElement.src = logo;\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  document\n    .getElementById(\"favicon\").href = favicon;\n\n  document\n    .getElementById(\"makeCryptoCard\")\n    .addEventListener(\"click\", () => makeCryptoCard());\n\n  document\n    .getElementById(\"resetButton\")\n    .addEventListener(\"click\", () => resetInputForms());\n\n  document\n    .getElementById(\"printButton\")\n    .addEventListener(\"click\", () => printCryptoCard(\"cryptocard\"));\n  \n  resetInputForms(a1, a2, a3, a4);\n});\n\n/* ======== KONFIGURATION ======== */\nconst a1Default = \"abcdefghijklmnopqrstuvwxyz\";\nconst a2Default = \"ABCDEFGHJKLMNPQRSTUVWXYZ\";\nconst a3Default = \"1234567890\";\nconst a4Default = \"#+*!?=\u00A7$%&()\";\n\nconst maxZEILEN = 15; // Maximale H\u00F6he der Cryptocard\nconst maxSPALTEN = 26; // Maximale Breite der Cryptocard\n\nlet zeilen, spalten;\nlet a1, a2, a3, a4;\n\n/**\n * Imputfelder mit Standartwerten f\u00FCllen\n *\n */\nfunction resetInputForms() {\n  document.getElementById(\"a1\").value = String(a1Default);\n  document.getElementById(\"a2\").value = String(a2Default);\n  document.getElementById(\"a3\").value = String(a3Default);\n  document.getElementById(\"a4\").value = String(a4Default);\n}\n\n/**\n * Holt dynamische Werte aus dem HTML-Dokument\n * \n */\nfunction getImputForms() {\n  a1 = document.getElementById(\"a1\").value;\n  a2 = document.getElementById(\"a2\").value;\n  a3 = document.getElementById(\"a3\").value;\n  a4 = document.getElementById(\"a4\").value;\n  zeilen = Number(document.getElementById(\"zeilen\").value);\n  spalten = Number(document.getElementById(\"spalten\").value);\n  if (zeilen > maxZEILEN) {\n    zeilen = maxZEILEN;\n    document.getElementById(\"zeilen\").value = maxZEILEN;\n  }\n  if (spalten > maxSPALTEN) {\n    spalten = maxSPALTEN;\n    document.getElementById(\"spalten\").value = maxSPALTEN;\n  }\n}\n\n/**\n * W\u00E4hlt ein zuf\u00E4lliges Zeichen aus den \u00FCbergebenen Strings aus (Browser/WebCrypto).\n * @param  {...string} sets - Beliebig viele Strings als Zeichensets\n * @returns {string} - Ein zuf\u00E4lliges Zeichen aus einem der Sets\n */\nfunction zufallszeichen(...sets) {\n  const combined = sets.join(\"\");\n  if (combined.length === 0) {\n    throw new Error(\"zufallszeichen: Mindestens ein Zeichen muss vorhanden sein.\");\n  }\n\n  const cryptoObj = globalThis.crypto;\n  if (!cryptoObj?.getRandomValues) {\n    throw new Error(\"zufallszeichen: Web Crypto API (crypto.getRandomValues) ist nicht verf\u00FCgbar.\");\n  }\n\n  const len = combined.length;\n\n  // Rejection Sampling, um Modulo-Bias zu vermeiden\n  const max = 0x100000000; // 2^32\n  const limit = max - (max % len);\n\n  const buf = new Uint32Array(1);\n  let x;\n  do {\n    cryptoObj.getRandomValues(buf);\n    x = buf[0];\n  } while (x >= limit);\n\n  return combined[x % len];\n}\n\n/**\n * Erstellt eine HTML-Tabelle dynamisch\n * @param {number} rows Anzahl der Zeilen (ohne Legende)\n * @param {number} cols Anzahl der Spalten (ohne Legende)\n * @param {(row: number, col: number) => string} cellFn Funktion zur Bef\u00FCllung der Zellen\n * @returns {HTMLTableElement} generierte Tabelle\n * \n */\nfunction makeTableCryptoCard(rows, cols, cellFn) {\n  const table = document.createElement(\"table\");\n  table.style.borderCollapse = \"collapse\";\n\n  for (let r = 0; r <= rows; r++) {\n    const tr = document.createElement(\"tr\");\n\n    for (let c = 0; c <= cols; c++) {\n      const cell =\n        r === 0 || c === 0\n          ? document.createElement(\"th\")\n          : document.createElement(\"td\");\n      cell.style.border = \"1px solid black\";\n      cell.style.padding = \"4px\";\n      cell.style.textAlign = \"center\";\n\n      if (r === 0 && c === 0) {\n        cell.textContent = \"\"; // obere linke Ecke leer\n      } else if (r === 0) {\n        cell.textContent = String.fromCharCode(64 + c); // Spalten-Legende A-Z\n      } else if (c === 0) {\n        cell.textContent = r; // Zeilen-Legende 1-n\n      } else {\n        // Zelleninhalt durch \u00FCbergebene Funktion\n        cell.textContent = cellFn(r, c);\n      }\n\n      tr.appendChild(cell);\n    }\n\n    table.appendChild(tr);\n  }\n\n  return table;\n}\n\n/**\n * Wird aus dem Formular aufgerufen, liesst die Parameter ein und erstellt die Tabelle\n *\n *\n */\nfunction makeCryptoCard() {\n  getImputForms();\n  const container = document.getElementById(\"cryptocard\");\n  const table = makeTableCryptoCard(zeilen, spalten, () =>\n    zufallszeichen(a1, a2, a3, a4)\n  );\n  container.innerHTML = \"\";\n  table.id = \"cryptoCardTable\";\n  container.appendChild(table);\n\n  /* Schaltfl\u00E4che \"Drucken\" aktivieren wenn Tabelle vorhanden */\n  if (table) {\n    document.getElementById(\"printButton\").disabled = false;\n  }\n}\n\n/**\n * \u00D6ffnet Popup und druckt Tabelle\n *\n */\nfunction printCryptoCard(tableId) {\n  const table = document.getElementById(tableId);\n  if (!table) {\n    console.error(`Tabelle mit ID \"${tableId}\" nicht gefunden.`);\n    return;\n  }\n\n  const printWindow = window.open(\"about:blank\", \"_blank\", \"width=800,height=600\");\n  if (!printWindow) {\n    console.error(\"Popup wurde blockiert (window.open() == null).\");\n    return;\n  }\n\n  const doc = printWindow.document;\n\n  // Standards-Mode erzwingen (DOCTYPE) -> stabileres Drucklayout\n  doc.open();\n  doc.write(`<!doctype html>\n<html><head>\n  <meta charset=\"utf-8\">\n  <title>CryptoCard</title>\n  <style>\n    @media print {\n      th {\n        background: yellow !important;\n        color: #000 !important;\n        -webkit-print-color-adjust: exact !important;\n        print-color-adjust: exact !important;\n      }\n      * {\n        -webkit-print-color-adjust: exact !important;\n        print-color-adjust: exact !important;\n      }\n    }\n  </style>\n</head>\n<body>\n  <div id=\"table-container\"><!-- Platzhalter fuer Tabelle zum Druck --></div>\n</body></html>`);\n  doc.close();\n\n  // Tabelle einsetzen (klonen, damit Original-DOM unber\u00FChrt bleibt)\n  doc.getElementById(\"table-container\").appendChild(table.cloneNode(true));\n\n  // Print-Button verbinden\n  // doc.getElementById(\"print-btn\").addEventListener(\"click\", () => printWindow.print());\n\n  printWindow.print();\n  printWindow.focus();\n}\n\n\n"],
  "mappings": "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",
  "names": []
}
